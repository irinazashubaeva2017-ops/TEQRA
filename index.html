<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>TEQRA ‚Äî –ú–∞–≥–∞–∑–∏–Ω –Ω–æ—É—Ç–±—É–∫—ñ–≤</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
body { background:#0f172a; color:white; }
.glow { box-shadow:0 0 20px #00f0ff55; }
.cyber-border { border:1px solid #00f0ff44; }
textarea { background:#0f172a; }
</style>
</head>

<body class="min-h-screen flex flex-col">

<header class="p-4 flex justify-between items-center border-b border-cyan-500/20">
<h1 class="text-2xl font-bold text-cyan-400 tracking-widest">TEQRA</h1>
<div class="flex gap-3">
<button onclick="toggleCart()" class="px-3 py-1 bg-cyan-600 rounded hover:bg-cyan-500">–ö–æ—à–∏–∫</button>
<button onclick="adminLogin()" class="px-3 py-1 bg-purple-600 rounded hover:bg-purple-500">‚ö°</button>
</div>
</header>

<main class="flex-1 p-4">
<div id="catalog" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</main>

<div id="emptyState" class="hidden flex flex-col items-center justify-center mt-20 text-center">
<div class="text-6xl">üöÄ</div>
<p class="mt-4 text-xl text-cyan-300">
–¢–æ–≤–∞—Ä–∏ –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ... –ú–∞–±—É—Ç—å, –Ω–æ—É—Ç–±—É–∫–∏ –ø–æ–ª–µ—Ç—ñ–ª–∏ –≤ –∫–æ—Å–º–æ—Å. –ó–∞—á–µ–∫–∞–π—Ç–µ —Ç—Ä—ñ—à–∫–∏!
</p>
</div>

<!-- –ö–æ—à–∏–∫ -->
<div id="cartPanel" class="fixed right-0 top-0 h-full w-full sm:w-96 bg-slate-900 p-5 hidden overflow-y-auto">
<h2 class="text-xl mb-4 text-cyan-400">–í–∞—à –∫–æ—à–∏–∫</h2>
<div id="cartItems"></div>

<form id="orderForm" class="mt-4 space-y-2">
<input required placeholder="–Ü–º'—è" class="w-full p-2 rounded bg-slate-800"/>
<input required placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ" class="w-full p-2 rounded bg-slate-800"/>
<input required placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É" class="w-full p-2 rounded bg-slate-800"/>
<button class="w-full bg-cyan-600 p-2 rounded mt-2">–û—Ñ–æ—Ä–º–∏—Ç–∏</button>
</form>

<button onclick="toggleCart()" class="mt-4 text-red-400">–ó–∞–∫—Ä–∏—Ç–∏</button>
</div>

<!-- –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å -->
<div id="adminPanel" class="fixed inset-0 bg-black/80 hidden flex justify-center items-center">
<div class="bg-slate-900 p-6 w-full max-w-md rounded">
<h2 class="text-cyan-400 text-xl mb-4">–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å</h2>

<input id="model" placeholder="–ú–æ–¥–µ–ª—å" class="w-full p-2 mb-2 bg-slate-800 rounded"/>
<input id="price" placeholder="–¶—ñ–Ω–∞" class="w-full p-2 mb-2 bg-slate-800 rounded"/>
<textarea id="specs" placeholder="–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏" class="w-full p-2 mb-2 bg-slate-800 rounded"></textarea>
<input type="file" id="imageUpload" class="mb-3 text-sm"/>

<button onclick="addProduct()" class="w-full bg-green-600 p-2 rounded mb-2">–î–æ–¥–∞—Ç–∏</button>
<button onclick="closeAdmin()" class="w-full bg-red-600 p-2 rounded">–ó–∞–∫—Ä–∏—Ç–∏</button>
</div>
</div>

<!-- Live Code -->
<div id="liveCode" class="fixed bottom-0 left-0 w-full h-1/2 bg-slate-900 hidden p-4">
<h2 class="text-cyan-400 mb-2">Live Code IDE</h2>
<textarea id="codeEditor" class="w-full h-40 p-2 rounded"></textarea>
<button onclick="runCode()" class="bg-cyan-600 px-4 py-2 rounded mt-2">–í–∏–∫–æ–Ω–∞—Ç–∏</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyCuYjKFAsKbdu_PLI4OkxiW6Wz-Yhq_q44",
databaseURL: "https://catalog-b9cc2-default-rtdb.europe-west1.firebasedatabase.app",
projectId: "catalog-b9cc2",
storageBucket: "catalog-b9cc2.firebasestorage.app"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

let cart = [];

function renderProducts(data) {
const catalog = document.getElementById("catalog");
catalog.innerHTML = "";
if(!data){
document.getElementById("emptyState").classList.remove("hidden");
return;
}
document.getElementById("emptyState").classList.add("hidden");

Object.entries(data).forEach(([id, item])=>{
catalog.innerHTML += `
<div class="bg-slate-800 p-4 rounded glow cyber-border">
<img src="${item.image}" class="w-full h-40 object-cover rounded mb-2"/>
<h3 class="text-lg text-cyan-300">${item.model}</h3>
<p class="text-sm text-gray-400">${item.specs}</p>
<p class="text-cyan-400 font-bold mt-2">${item.price} –≥—Ä–Ω</p>
<button onclick='addToCart(${JSON.stringify(item)})'
class="mt-2 bg-cyan-600 w-full p-2 rounded">–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫</button>
</div>`;
});
}

onValue(ref(db,"products"), snapshot=>{
renderProducts(snapshot.val());
});

window.addToCart = function(item){
cart.push(item);
renderCart();
}

function renderCart(){
const container = document.getElementById("cartItems");
container.innerHTML="";
cart.forEach(i=>{
container.innerHTML+=`<div class="border-b py-2">${i.model} - ${i.price} –≥—Ä–Ω</div>`
});
}

window.toggleCart=function(){
document.getElementById("cartPanel").classList.toggle("hidden");
}

window.adminLogin=function(){
const pass=prompt("–í–≤–µ–¥—ñ—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–æ–¥:");
if(pass==="teqra2026"){
document.getElementById("adminPanel").classList.remove("hidden");
}
}

window.closeAdmin=function(){
document.getElementById("adminPanel").classList.add("hidden");
}

window.addProduct=async function(){
const model=document.getElementById("model").value;
const price=document.getElementById("price").value;
const specs=document.getElementById("specs").value;
const file=document.getElementById("imageUpload").files[0];

let imageUrl="";

if(file){
const formData=new FormData();
formData.append("image",file);
const res=await fetch("https://api.imgbb.com/1/upload?key=70bb1de10d70f62410bc55ddd2a4fd0e",{method:"POST",body:formData});
const data=await res.json();
imageUrl=data.data.url;
}

push(ref(db,"products"),{model,price,specs,image:imageUrl});
closeAdmin();
}

window.runCode=function(){
const code=document.getElementById("codeEditor").value;
eval(code);
}

document.addEventListener("keydown",e=>{
if(e.ctrlKey && e.key==="`"){
document.getElementById("liveCode").classList.toggle("hidden");
}
});
</script>

</body>
</html>
